2025-06-21 09:31:44.659 | INFO     | __main__:main:25 - ==== 智能音箱核心功能集成测试（不含TTS） ====
2025-06-21 09:31:44.664 | DEBUG    | __main__:main:27 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'voice_name': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50, 'engine_type': 'intp65'}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'api_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 09:38:03.654 | INFO     | __main__:main:25 - ==== 智能音箱核心功能集成测试（不含TTS） ====
2025-06-21 09:38:03.658 | DEBUG    | __main__:main:27 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'voice_name': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50, 'engine_type': 'intp65'}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'api_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 09:38:03.717 | INFO     | __main__:simulate_one_turn:50 - 【测试流程】开始对话...
2025-06-21 09:38:03.717 | ERROR    | __main__:simulate_one_turn:63 - 未设置有效的测试音频或文本，请填写 TEST_AUDIO_PATH 或 MOCK_USER_TEXT
2025-06-21 09:39:27.387 | INFO     | __main__:main:25 - ==== 智能音箱核心功能集成测试（不含TTS） ====
2025-06-21 09:39:27.391 | DEBUG    | __main__:main:27 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'voice_name': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50, 'engine_type': 'intp65'}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'api_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 09:39:27.451 | INFO     | __main__:simulate_one_turn:50 - 【测试流程】开始对话...
2025-06-21 09:39:27.452 | INFO     | __main__:simulate_one_turn:61 - 直接输入文本测试: hello, how are you
2025-06-21 09:39:27.452 | INFO     | __main__:simulate_one_turn:75 - 对话链路测试：开始与LLM交互。
2025-06-21 09:39:32.760 | INFO     | dialogue.deepseek_adapter:chat:20 - DeepSeek回复: Hello! 😊 I'm just a computer program, so I don't have feelings, but I'm here and ready to help you with anything you need. How about you? How are you doing today?
2025-06-21 09:39:32.761 | INFO     | __main__:simulate_one_turn:81 - AI回复文本: Hello! 😊 I'm just a computer program, so I don't have feelings, but I'm here and ready to help you with anything you need. How about you? How are you doing today?
2025-06-21 22:54:24.047 | INFO     | __main__:main:20 - ==== 智能语音音箱主流程启动 ====
2025-06-21 22:54:24.051 | DEBUG    | __main__:main:22 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 22:56:52.579 | INFO     | __main__:main:20 - ==== 智能语音音箱主流程启动 ====
2025-06-21 22:56:52.584 | DEBUG    | __main__:main:22 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:01:40.861 | INFO     | __main__:main:20 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:01:40.868 | DEBUG    | __main__:main:22 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:04:15.235 | INFO     | __main__:main:20 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:04:15.240 | DEBUG    | __main__:main:22 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:28:56.251 | INFO     | __main__:main:20 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:28:56.255 | DEBUG    | __main__:main:22 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:28:56.256 | INFO     | __main__:prepare_welcome_audio:14 - 未发现本地欢迎语音，将使用TTS生成。
2025-06-21 23:31:28.665 | INFO     | __main__:main:20 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:31:28.670 | DEBUG    | __main__:main:22 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:31:28.670 | INFO     | __main__:prepare_welcome_audio:14 - 未发现本地欢迎语音，将使用TTS生成。
2025-06-21 23:39:03.578 | INFO     | __main__:main:24 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:39:03.582 | DEBUG    | __main__:main:26 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:39:03.583 | INFO     | __main__:prepare_welcome_audio:14 - 未发现本地欢迎语音，将使用TTS生成。
2025-06-21 23:39:05.666 | INFO     | __main__:prepare_welcome_audio:19 - 欢迎语音生成并保存到：audio_out/welcome.mp3
2025-06-21 23:39:05.666 | INFO     | utils.tts_cache_manager:prepare_error_prompts:23 - 生成TTS缓存：error_recording -> 录音设备不可用，请检查麦克风。
2025-06-21 23:43:36.900 | INFO     | __main__:main:24 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:43:36.904 | DEBUG    | __main__:main:26 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:43:36.904 | DEBUG    | __main__:prepare_welcome_audio:21 - 本地欢迎语音已存在：audio_out/welcome.mp3
2025-06-21 23:43:36.905 | INFO     | utils.tts_cache_manager:prepare_error_prompts:23 - 生成TTS缓存：error_recording -> 录音设备不可用，请检查麦克风。
2025-06-21 23:43:39.166 | INFO     | utils.tts_cache_manager:prepare_error_prompts:27 - TTS缓存已生成并移动到：audio_out/tts_cache/error_recording.mp3
2025-06-21 23:43:39.166 | INFO     | utils.tts_cache_manager:prepare_error_prompts:23 - 生成TTS缓存：error_asr -> 语音识别服务不可用，请检查网络或稍后重试。
2025-06-21 23:43:41.628 | INFO     | utils.tts_cache_manager:prepare_error_prompts:27 - TTS缓存已生成并移动到：audio_out/tts_cache/error_asr.mp3
2025-06-21 23:43:41.628 | INFO     | utils.tts_cache_manager:prepare_error_prompts:23 - 生成TTS缓存：error_network -> 网络连接异常，请检查网络。
2025-06-21 23:43:43.950 | INFO     | utils.tts_cache_manager:prepare_error_prompts:27 - TTS缓存已生成并移动到：audio_out/tts_cache/error_network.mp3
2025-06-21 23:43:43.951 | INFO     | utils.tts_cache_manager:prepare_error_prompts:23 - 生成TTS缓存：error_tts -> 语音合成服务不可用。
2025-06-21 23:43:46.355 | INFO     | utils.tts_cache_manager:prepare_error_prompts:27 - TTS缓存已生成并移动到：audio_out/tts_cache/error_tts.mp3
2025-06-21 23:43:46.355 | INFO     | utils.tts_cache_manager:prepare_error_prompts:23 - 生成TTS缓存：error_system -> 系统发生未知错误，请稍后重试。
2025-06-21 23:43:48.572 | INFO     | utils.tts_cache_manager:prepare_error_prompts:27 - TTS缓存已生成并移动到：audio_out/tts_cache/error_system.mp3
2025-06-21 23:43:48.572 | INFO     | utils.tts_cache_manager:prepare_error_prompts:23 - 生成TTS缓存：error_no_input -> 未检测到有效语音，请再试一次。
2025-06-21 23:43:50.983 | INFO     | utils.tts_cache_manager:prepare_error_prompts:27 - TTS缓存已生成并移动到：audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:43:51.040 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:43:51.149 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:51.149 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:43:52.478 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:43:52 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:43:52.478 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:43:52.478 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:43:52.479 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:43:52.479 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:43:52.587 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/tts_cache/error_no_input.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:52.588 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:43:52.696 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:52.696 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:43:54.173 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:43:54 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:43:54.173 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:43:54.173 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:43:54.174 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:43:54.174 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:43:54.304 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/tts_cache/error_no_input.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:54.305 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:43:54.431 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:54.431 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:43:55.735 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:43:55 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:43:55.735 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:43:55.735 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:43:55.736 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:43:55.736 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:43:55.836 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/tts_cache/error_no_input.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:55.836 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:43:55.945 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:55.946 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:43:57.461 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:43:57 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:43:57.461 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:43:57.461 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:43:57.462 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:43:57.462 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:43:57.564 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/tts_cache/error_no_input.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:57.565 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:43:57.682 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:57.683 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:43:59.002 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:43:58 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:43:59.003 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:43:59.003 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:43:59.003 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:43:59.004 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:43:59.103 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/tts_cache/error_no_input.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:59.103 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:43:59.214 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:43:59.214 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:44:12.019 | INFO     | __main__:main:24 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:44:12.024 | DEBUG    | __main__:main:26 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:44:12.025 | DEBUG    | __main__:prepare_welcome_audio:21 - 本地欢迎语音已存在：audio_out/welcome.mp3
2025-06-21 23:44:12.025 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_recording.mp3
2025-06-21 23:44:12.025 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_asr.mp3
2025-06-21 23:44:12.025 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_network.mp3
2025-06-21 23:44:12.025 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_tts.mp3
2025-06-21 23:44:12.026 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_system.mp3
2025-06-21 23:44:12.026 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:44:12.098 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:44:12.203 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:44:12.204 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:44:13.708 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:44:13 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:44:13.709 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:44:13.709 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:44:13.710 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:44:13.710 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:44:13.812 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/tts_cache/error_no_input.mp3']' returned non-zero exit status 1.
2025-06-21 23:44:13.812 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:44:13.923 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:44:13.923 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:44:15.432 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:44:15 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:44:15.432 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:44:15.433 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:44:15.433 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:44:15.433 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:44:15.574 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/tts_cache/error_no_input.mp3']' returned non-zero exit status 1.
2025-06-21 23:44:15.575 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:44:15.708 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:44:15.709 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:44:17.199 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:44:17 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:44:17.199 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:44:17.200 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:44:17.200 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:44:17.200 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:44:17.310 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/tts_cache/error_no_input.mp3']' returned non-zero exit status 1.
2025-06-21 23:44:17.310 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:44:17.421 | ERROR    | audio_out.player:play_audio:10 - 播放失败: Command '['/usr/bin/python3', '/home/ericc/mydev/open-voicebox-pi/venv/lib/python3.11/site-packages/playsound.py', 'audio_out/welcome.mp3']' returned non-zero exit status 1.
2025-06-21 23:44:17.422 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:54:45.866 | INFO     | __main__:main:24 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:54:45.872 | DEBUG    | __main__:main:26 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:54:45.873 | DEBUG    | __main__:prepare_welcome_audio:21 - 本地欢迎语音已存在：audio_out/welcome.mp3
2025-06-21 23:54:45.874 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_recording.mp3
2025-06-21 23:54:45.874 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_asr.mp3
2025-06-21 23:54:45.874 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_network.mp3
2025-06-21 23:54:45.874 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_tts.mp3
2025-06-21 23:54:45.874 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_system.mp3
2025-06-21 23:54:45.875 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:54:46.008 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:54:49.026 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/welcome.mp3
2025-06-21 23:54:49.027 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:54:50.385 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:54:50 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:54:50.386 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:54:50.386 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:54:50.386 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:54:50.386 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:54:53.927 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:54:53.927 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:54:55.409 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/welcome.mp3
2025-06-21 23:54:55.409 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:54:56.903 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:54:56 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:54:56.903 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:54:56.904 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:54:56.904 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:54:56.904 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:55:00.449 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:55:00.450 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:58:51.011 | INFO     | __main__:main:24 - ==== 智能语音音箱主流程启动 ====
2025-06-21 23:58:51.017 | DEBUG    | __main__:main:26 - 完整配置参数: {'xunfei_asr': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'hotwords': '小猪猪,芝麻开门', 'engine_type': 'sms16k'}, 'xunfei': {'app_id': '016b92a6', 'api_key': '8ac63485f16c76f845142189872f5cea', 'api_secret': 'MjUzZjZmZjFkOTllMDYwYjljYzhlYWE2', 'vcn': 'x4_yezi', 'speed': 50, 'volume': 50, 'pitch': 50}, 'deepseek': {'api_key': 'sk-f2d5403d07e1499a8e344a09588f4eb7', 'base_url': 'https://api.deepseek.com', 'model': 'deepseek-chat', 'temperature': 0.7, 'max_tokens': 2048}, 'endwords': ['再见', '拜拜', '下次再说'], 'welcome_audio_path': 'audio_out/welcome.mp3', 'welcome_text': '你好。', 'audio_out_dir': 'audio_out', 'tts_cache_dir': 'audio_out/tts_cache', 'error_prompts': {'error_recording': '录音设备不可用，请检查麦克风。', 'error_asr': '语音识别服务不可用，请检查网络或稍后重试。', 'error_network': '网络连接异常，请检查网络。', 'error_tts': '语音合成服务不可用。', 'error_system': '系统发生未知错误，请稍后重试。', 'error_no_input': '未检测到有效语音，请再试一次。'}, 'wakeword': {'keyword_paths': 'wakeword/xiaozhu.ppn', 'access_key': 'TTnalPNKGniQ17wPRKfQR7u29VGYKVHk2NheRgMh7K7b5JIVnJE3UQ==', 'sensitivities': [0.7], 'audio_device_index': 0}, 'tts_cache_policy': {'max_files': 200, 'max_bytes': 15000000000}}
2025-06-21 23:58:51.018 | DEBUG    | __main__:prepare_welcome_audio:21 - 本地欢迎语音已存在：audio_out/welcome.mp3
2025-06-21 23:58:51.018 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_recording.mp3
2025-06-21 23:58:51.019 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_asr.mp3
2025-06-21 23:58:51.019 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_network.mp3
2025-06-21 23:58:51.019 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_tts.mp3
2025-06-21 23:58:51.019 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_system.mp3
2025-06-21 23:58:51.020 | DEBUG    | utils.tts_cache_manager:prepare_error_prompts:29 - TTS缓存已存在：audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:58:51.103 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:58:52.510 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/welcome.mp3
2025-06-21 23:58:52.510 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:58:53.797 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:58:53 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:58:53.798 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:58:53.799 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:58:53.799 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:58:53.799 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:58:57.375 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:58:57.375 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:58:58.861 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/welcome.mp3
2025-06-21 23:58:58.862 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:59:00.227 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:58:59 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:59:00.227 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:59:00.227 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:59:00.228 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:59:00.228 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:59:03.774 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/tts_cache/error_no_input.mp3
2025-06-21 23:59:03.775 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/welcome.mp3
2025-06-21 23:59:05.262 | INFO     | audio_out.player:play_audio:8 - 播放音频完成: audio_out/welcome.mp3
2025-06-21 23:59:05.263 | INFO     | __main__:main:81 - 等待用户说话...（唤醒后进入录音）
2025-06-21 23:59:06.632 | ERROR    | asr.xunfei_asr:_on_error:67 - ASR websocket异常: Handshake status 401 Unauthorized -+-+- {'date': 'Sat, 21 Jun 2025 15:59:06 GMT', 'content-type': 'application/json; charset=utf-8', 'connection': 'keep-alive', 'content-length': '43', 'server': 'kong/1.3.0'} -+-+- b'{"message":"HMAC signature does not match"}'
2025-06-21 23:59:06.633 | INFO     | asr.xunfei_asr:_on_close:71 - ASR websocket连接关闭
2025-06-21 23:59:06.633 | INFO     | __main__:main:86 - 用户语音识别结果: 
2025-06-21 23:59:06.633 | DEBUG    | __main__:main:89 - 识别结果为空，提示用户重说。
2025-06-21 23:59:06.634 | DEBUG    | audio_out.player:play_audio:6 - 准备播放音频: audio_out/tts_cache/error_no_input.mp3
